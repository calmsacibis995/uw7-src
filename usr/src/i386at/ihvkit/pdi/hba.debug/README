#ident	"@(#)ihvkit:pdi/hba.debug/README	1.4"

There are a number of ways to debug kernel resident drivers and the Kernel
debugger (kdb) happens to be the most versatile debugger available with the
UnixWare product line.  Though kdb is available on any installed system,
it is not present on the boot floppies used during system installation.
This presents a whole new set of challenges as problems are encountered when
drivers are dynamically loaded from IHV-HBA floppies.  In order to help
developers debug problems of this nature, images or scripts have been
provided with the IHV kit to address this issue.


kdb.boot.image (UnixWare 1.1 only)

The UnixWare 1.1 system uses three floppies for installation.  The mini-kernel
is present on the first floppy.  The 1.44MB floppy image named kdb.boot,
located in this directory, contains the mini-kernel with kdb linked in
statically.

FYI: The emergency boot diskette (used to debug systems that are unable to 
     boot from the hard disk) can be generated by executing:

	/usr/sbin/emergency_disk diskette1 on any UnixWare-1.1 system.

magic.floppy (UnixWare 2 only)

The Unixware 2 system uses a single boot floppy for installation and the
mini-kernel on the first floppy does not have kdb linked in.  To access kdb
before the IHV HBA floppy is used, the debugger has to be loaded in (kdb is
loadable module in UnixWare 2).  The step-by step process is as follows:

- Once the help screen is presented to the user (before the IHV-HBA
floppy is presented to the installation process), switch to VT-0 by typing
alt-sysreq-h.

- Remove the boot floppy and insert the magic floppy.

- Execute the 'magic' command to load in the kdb driver.

- You can enter the debugger by typing ctrl-alt-d.

- Unmount the magic floppy by executing 'umount /flpy2'.

- Remove the magic floppy and re-insert the boot floppy.

- Type alt-sysreq-f1 to return to the installation menu.

- Continue with the normal installation.

A ksh script, magic.floppy.make, has been included which will automatically
generate a magic floppy for you if you do not already have one.  For the
script to successfully run, the kdb package must be installed prior to
running the script.
