#===============================================================================
#
#	ident @(#) charm.plan 11.2 97/12/04 
#
#******************************************************************************
#
#	Copyright (C) 1993-1997 The Santa Cruz Operation, Inc.
#		All Rights Reserved.
#
#	The information in this file is provided for the exclusive use of
#	the licensees of The Santa Cruz Operation, Inc.  Such users have the
#	right to use, modify, and incorporate this code into other products
#	for purposes authorized by the license agreement provided they include
#	this notice and the associated copyright notice with any such product.
#	The information in this file is provided "AS IS" without warranty.
#
#******************************************************************************
#
# Modification History
#
# M000, 08-Apr-97, andrean
#	- Created.
#
#===============================================================================

		Mail Admin GUI : Channel Table Client
		     Test Plan for CHARM portions
		------------------------------------

This is the test plan for the channel table editor client of the mail admin 
GUI, specific to the CHARM portions of the code.  The goal of this test plan,
in conjunction with the "gui.plan" portion, is to achieve 100% branch coverage 
of tcl source files for the channel table editor.

Since a command line interface for the editor does not exist, the gui 
can only be manually tested.  However, this test plan implements the idea of 
"semi-automation", meaning that a shell script does the set up and comparison 
of files, but the GUI steps must still be executed manually according to a 
script of instructions.

The test cases and instructions outlined later below are a subset of the
test cases in gui.plan (for the gui portions), worded slightly differently 
for CHARM navigation.  Only a subset of the gui test cases were necessary
to achieve complete branch coverage, as the CHARM specific portions are
mostly due to differences in display, not functionality.


Setup and Execution:
-------------------

1) The env variable TESTDIR may be set to the directory in which the test
   script "charm" will exist and be run, and where input files for "charm" 
   will exist.  If TESTDIR is not set in your env, the script will by default 
   set it to the current working directory.  The following files are expected 
   to exist in $TESTDIR:
        $TESTDIR/testfiles/channel.1
	$TESTDIR/testfiles/channel.2
	$TESTDIR/testfiles/channel.3

2) Set env variable PROGDIR to the directory in which the "channel"
   executable exists.  If PROGDIR is not set in your env, this script
   will by default set it to /etc/mail/admin.

   The "channel" executable should be the instrumented version if you would
   like to determine code coverage of the aliases client:
         a) do a 'make channelt' of the channel source
         b) copy executable "channelt" to $PROGDIR/channel

3) Run the script "charm" as root to invoke the tests, and follow the plan
   below to execute the steps for each test case.  For each case, the script
   will invoke the channel table editor in CHARM in a separate xterm.  You
   simply execute the steps outlined below for each test case.  Test results 
   will be sent to stdout.  If a test case fails, a prompt will be displayed 
   on stdout, asking the tester if he/she wishes to re-execute this test-- 
   this is in the event that the tester believes that the failure may be due 
   to incorrect execution of the test steps.

4) To obtain complete branch coverage results, execute the gui.plan test
   plan, as well as this one, before doing the following steps:
        a) Execution of both the "gui" and "charm" scripts will have created 
	   many files of the form trace.* in $TESTDIR.
        b) Copy all *.tclt files from the source directory (generated by the 
	   make of channelt) into the $TESTDIR directory.
        c) Execute the "do_merge" script, which will output coverage results
           to stdout, and also create files of the form *.tclt.a.  These
           *.tclt.a files are annotated versions of the source files--
           lines beginning with a ">_branch" in these files mark unexecuted
           branches.


The test cases, and step by step instructions, are as follows:
-------------------------------------------------------------

1. Add a new entry (channel_charm_core_entry_add):
	- Select the entry with "foo.pdev.sco.com" under the "Host" column.
	  (You will first have to de-select the entry "spam.pdev.sco.com".)
	- Select menu option Entry->Add.
	- In Add Channel Table Entry dialog:
		- Select the OK button (TAB over to the OK button, then
		  press the Enter key).
		- Ensure an error dialog pops up with the message
		  'No host name specified for "Host Name" field'.  Press the
		  Enter key to return to the Add Channel Table Entry dialog.
		- Type hostname "uwhelp.com" into the "Host Name" text field.
		- Select the OK button.
		- Ensure an error dialog pops up with the message
		  'No host name specified for "Forwarding Host Name" field'.
		  Press the Enter key to return to the Add Channel Table Entry 
		  dialog.
		- Type the hostname "mail.sco.com" into the "Forwarding Host 
		  Name" text field.
		- Select the OK button.
		- Ensure an error dialog pops up with the message
		  'An entry for host name "uwhelp.com" already exists'.  Press
		  the Enter key to return to the Add Channel Table Entry dialog.
		- Change "uwhelp.com" to "newHost sco.com" in the "Host Name"
		  text field -- make sure there is a space between the 
		  "newHost" and "sco.com".
		- Select the OK button.
		- Ensure an error dialog pops up with the message
		  'A host name may not contain a space'.  Press the Enter key
		  to return to the Add Channel Table Entry dialog.
		- Change "newHost sco.com" to "newHost.sco.com" in the "Name" 
		  text field.
		- Select the OK button to exit out of the Add Channel 
		  Table Entry dialog.
	- In main screen, select menu option Entry->Exit.
	- In Save Changes dialog, select Yes button to save changes and exit.

2. Delete all entries (channel_charm_core_entry_delete_all):
	- Select entries with "spam.pdev.sco.com" and "foo.pdev.sco.com" under
	  the Host column.  (Arrow down to entries, then press space bar to
	  select them-- selected entries will be prefaced by an asterisk *).
	- Select menu option Entry->Delete to delete the selected entries.
	  The entry for host "yikes.london.sco.com" should now be selected.
	- Deselect the entry "yikes.london.sco.com."  Select the entries with 
	  names "tech.newjersey.sco.com" and "yikes.newjersey.sco.com" under 
	  the Host column. 
	- Select menu option Entry->Delete.  The entry for host "uwhelp.com" 
	  should now be selected.
	- Deselect the entry for "uwhelp.com".  Select the entry with name 
	  "build.newjersey.sco.com" under the Host column.
	- Select menu option Entry->Delete.  The entry for host
	  "build.pdev.sco.com" should now be selected.
	- Select the entries with names "uwhelp.com", "dromeda.pdev.sco.com" and
	  "build.pdev.sco.com" under the Host column.
	- Select menu option Entry->Delete.  The entry for host
	  "test.newjersey.sco.com" should be selected.
	- Select menu option Entry->Delete.  The entry for host
	  "yikes.london.sco.com" should now be selected.
	- Select menu option Entry->Delete. There should be no entries 
	  remaining.
	- Select the Entry menu: all options except Add, Save, and Exit should 
	  be stippled out.  
	- Select menu option Entry->Exit.
	- In Save Changes dialog, select Yes button to save changes and exit.

3. Modify an entry (channel_charm_core_entry_modify):
	- Select the entry with hostname "foo.pdev.sco.com" under the Host 
	  column. (You will also have to deselect the entry for 
	  "spam.pdev.sco.com.")
	- Select menu option Entry->Modify.
	- In the Modify Channel Table Entry dialog:
		- Change "foo.pdev.sco.com" to "Yikes.london.sco.COM" in the 
		  "Host Name" text field.  Make sure that the "Y" and
		  "COM" in the host name are capitalized.
		- Select the "Select..." button to the right of the
		  "Forwarding Host Name" text field.
		- In the Select Host dialog:
			- Select the hostname ns.pdev.sco.COM, and then select
			  the OK button. 
		- Back in the Modify Channel Table Entry dialog, select the
		  OK button.
		- Ensure that an error dialog pops up with the message
		  'An entry for host name "Yikes.london.sco.COM" already 
		  exists'.  Select the OK button in the error dialog to 
		  return to the Modify Channel Table Entry dialog. 
		- Change "Yikes.london.sco.COM" to "modified.sco.com" in the 
		  "Host Name" text field.
		- Select the OK button to exit the Modify dialog.
	- Back in the main screen, deselect the entry for hostname
	  "modified.sco.com", then select the entry for hostname 
	  "spam.pdev.sco.com", and press the Enter key.
	- In the Modify Channel Table Entry dialog:
		- Select the "Select..." button to the right of the
		  "Host Name" text field.
		- In the Select Host dialog:
			- Remove the name "ns.pdev.sco.COM" from the "Selection"
			  text field, then type "bean.pdev.sco.com" in the 
			  "Selection" text field.  Select the OK button.
		- Back in the Modify dialog, select the OK button to exit 
		  the Modify dialog.
	- In main screen, select menu option Entry->Exit.
	- In Save Changes dialog, select Yes button to save changes and exit.
	
4. Move up/down entry (channel_charm_core_entry_move):
	- Select the entry with "foo.pdev.sco.com" under the "Host" column.
	  (You will also have to deselect the entry for "spam.pdev.sco.com".)
	- Select menu option Entry->Move Up.  The "foo.pdev.sco.com" entry
	  should now be the first entry in the list.  Select the menu option
	  Entry->Move Up again.  You should hear a beep.
	- Select the entry with "uwhelp.com" under the "Host" column.
	  (You will also have to deselect the entry for "foo.pdev.sco.com".)
	- Select menu option Entry->Move Up.
	- Select the entry with "yikes.newjersey.sco.com" under the "Host" 
	  column.  (You will also have to deselect the entry for 
	  "uwhelp.com".)
	- Select menu option Entry->Move Down.  Select the menu option 
	  Entry->Move Down two more times.  "yikes.newjersey.sco.com" should 
	  now be the last entry in the list.
	- Select menu option Entry->Move Down again.  You should hear a beep.
	- In main screen, select menu option Entry->Exit.
	- In Save Changes dialog, click on Yes button.

5. Save table file (channel_charm_core_entry_save):
        - Select the entry with "yikes.london.sco.com" under the "Host" column.
	  (You will also have to deselect the entry for "spam.pdev.sco.com".)
        - Select menu option Entry->Add.
        - In Add Channel Table Entry dialog:
                - Type "newHost.sco.com" into the "Host Name" text field.
                - Type "mail sco.com" into the "Forwarding Host Name" text
                  field.  Make sure that there is a space between the "mail"
                  and "sco.com".
                - Select the OK button.
                - Ensure an error dialog pops up with the message
                  'A host name may not contain a space'.  Select the OK button 
		  in the error dialog to return to the Add Channel Table Entry 
		  dialog.  Focus should now be on the "Forwarding Host Name" 
		  text field.
                - Change the "mail sco.com" to "mail.sco.com" in the
                  "Forwarding Host Name" text field.
                - Select the OK button to exit the Add dialog.
        - Back in the main screen, select the entry with "spam.pdev.sco.com"
          under the "Host" column.  (You will also have to deselect the entry 
	  for "newHost.sco.com".)
        - Select menu option Entry->Modify.
        - In the Modify Channel Table Entry dialog:
                - Change the name "spam.pdev.sco.com" to "modified.pdev.sco.com"
                  in the Name text field.
                - Click on the Cancel button.
        - In main screen, select menu option Entry->Save.
        - In main screen, select menu option Entry->Exit.

