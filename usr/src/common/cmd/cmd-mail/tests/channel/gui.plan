#===============================================================================
#
#	ident @(#) gui.plan 11.2 97/12/04 
#
#******************************************************************************
#
#	Copyright (C) 1993-1997 The Santa Cruz Operation, Inc.
#		All Rights Reserved.
#
#	The information in this file is provided for the exclusive use of
#	the licensees of The Santa Cruz Operation, Inc.  Such users have the
#	right to use, modify, and incorporate this code into other products
#	for purposes authorized by the license agreement provided they include
#	this notice and the associated copyright notice with any such product.
#	The information in this file is provided "AS IS" without warranty.
#
#******************************************************************************
#
# Modification History
#
# M000, 08-Apr-97, andrean
#	- Created.
#
#===============================================================================

		Mail Admin GUI : Channel Table Client
		     Test Plan for GUI portions
		------------------------------------

This is the test plan for the channel table editor client of the mail admin 
GUI.  The goal of this test plan is to achieve 100% branch coverage of tcl 
source files for the channel table editor.  Since a command line interface for 
the editor does not exist, the gui can only be manually tested.  However, this 
test plan implements the idea of "semi-automation", meaning that scripts do 
the set up and comparison of files, but the GUI steps must still be executed 
manually according to a script.

Setup and Execution:

1) The env variable TESTDIR may be set to the directory in which the test
   script "gui" will exist and be run, and where input and output files
   for "gui" will exist.  If TESTDIR is not set in your env, the script will
   by default set it to the current working directory.  The following files
   are expected to exist in $TESTDIR:
        $TESTDIR/testfiles/channel.1
	$TESTDIR/testfiles/channel.2
	$TESTDIR/testfiles/channel.3

2) Set env variable PROGDIR to the directory in which the "channel"
   executable exists.  If PROGDIR is not set in your env, this script
   will by default set it to /etc/mail/admin.

   The "channel" executable should be the instrumented version if you would
   like to determine code coverage of the channel admin:
         a) do a 'make channelt' of the channel src
         b) copy executable "channelt" to $PROGDIR/channel

3) Run the script "gui" as root to invoke the tests, and follow the plan
   below to execute the steps for each test case.  Test results will be sent 
   to stdout.  If a test case fails, a prompt will be displayed on stdout, 
   asking the tester if he/she wishes to re-execute this test-- this is in the 
   event that the tester believes that the failure may be due to incorrect
   execution of the test steps.

4) To obtain branch coverage results, execute the charm.plan test, as well
   as this one, before doing the following steps:
        a) Execution of the "gui" and "charm" scripts will have created many
           files of the form trace.* into $TESTDIR.
        b) Copy all *.tclt files from the source directory (generated by the 
	   make of channelt) into the $TESTDIR directory.
        c) Execute the "do_merge" script, which will output coverage results
           to stdout, and also create files of the form *.tclt.a.  These
           *.tclt.a files are annotated versions of the source files--
           lines beginning with a ">_branch" in these files mark unexecuted
           branches.


The test cases, and step by step instructions, are as follows:

1. Add a new entry (channel_gui_core_entry_add):
	- Select the entry with "foo.pdev.sco.com" under the "Host" column.
	- Select menu option Entry->Add.
	- In Add Channel Table Entry dialog:
		- Click on the OK button.
		- Ensure an error dialog pops up with the message
		  'No host name specified for "Host Name" field'.  Click on the
		  OK button in the error dialog to return to the Add Channel
		  Table Entry dialog.
		- Type hostname "uwhelp.com" into the "Host Name" text field.
		- Click on the OK button.
		- Ensure an error dialog pops up with the message
		  'No host name specified for "Forwarding Host Name" field'.
		  Click on the OK button in the error dialog to return to the 
		  Add Channel Table Entry dialog.
		- Type the hostname "mail.sco.com" into the "Forwarding Host 
		  Name" text field.
		- Click on the OK button.
		- Ensure an error dialog pops up with the message
		  'An entry for host name "uwhelp.com" already exists'.  Click 
		  on the OK button in the error dialog to return to the Add 
		  Channel Table Entry dialog. 
		- Change "uwhelp.com" to "newHost sco.com" in the "Host Name"
		  text field -- make sure there is a space between the 
		  "newHost" and "sco.com".
		- Click on the OK button.
		- Ensure an error dialog pops up with the message
		  'A host name may not contain a space'.  Click on the
		  OK button in the error dialog to return to the Add Channel
		  Table Entry dialog.
		- Change "newHost sco.com" to "newHost.sco.com" in the "Name" 
		  text field.
		- Click on the OK button to exit out of the Add Channel 
		  Table Entry dialog.
	- In main screen, select menu option Entry->Exit.
	- In Save Changes dialog, click on Yes button to save changes and exit.

2. Delete an entry (channel_gui_core_entry_delete):
	- Select the entry with name "yikes.london.sco.com" under the Host 
	  column.
	- Select menu option Entry->Delete.
	- In the main screen, select menu option Entry->Exit.
	- In Save Changes dialog, click on Yes button to save changes and exit.

3. Delete all entries (channel_gui_core_entry_delete_all):
	- Select entries with "spam.pdev.sco.com" and "foo.pdev.sco.com" under
	  the Host column.  (You can click and then drag the mouse down over
	  the two entries.) All buttons on the toolbar except Add and Delete 
	  should be stippled out.
	- Click on the Delete button on the toolbar.  The entry for host
	  "yikes.london.sco.com" should be selected.
	- Select the entries with names "tech.newjersey.sco.com" and 
	  "yikes.newjersey.sco.com" under the Host column.  (You first click 
	  on "tech.newjersey.sco.com", then while holding down the CTRL key, 
	  click on "yikes.newjersey.sco.com".)
	- Click on the Delete button on the toolbar.  The entry for host
	  "uwhelp.com" should be selected.
	- Select the entry with name "build.newjersey.sco.com" under the Host 
	  column.
	- Click on the Delete button on the toolbar.  The entry for host
	  "build.pdev.sco.com" should be selected.
	- Select the entries with names "uwhelp.com", "dromeda.pdev.sco.com" and
	  "build.pdev.sco.com" under the Host column.
	- Click on the Delete button on the toolbar.  The entry for host
	  "test.newjersey.sco.com" should be selected.
	- Click on the Delete button on the toolbar.  The entry for host
	  "yikes.london.sco.com" should be selected.
	- Click on the Delete button on the toolbar. There should be no
	  entries remaining.
	- All buttons on the toolbar except Add should be stippled out.  Click 
	  on the Entry menu: all options except Add, Save, and Exit should be 
	  stippled out.  
	- In the main screen, select menu option Entry->Exit.
	- In Save Changes dialog, click on Yes button to save changes and exit.

4. Modify an entry (channel_gui_core_entry_modify):
	- Select the entry with hostname "foo.pdev.sco.com" under the Host 
	  column.
	- Select menu option Entry->Modify.
	- In the Modify Channel Table Entry dialog:
		- Change "foo.pdev.sco.com" to "Yikes.london.sco.COM" in the 
		  "Host Name" text field.  Make sure that the "Y" and
		  "COM" in the host name are capitalized.
		- Click on the "Select..." button to the right of the
		  "Forwarding Host Name" text field.
		- In the Select Host dialog:
			- Select the hostname ns.pdev.sco.COM and click
			  on the OK button.
		- Back in the Modify Channel Table Entry dialog, click on the 
		  OK button.
		- Ensure that an error dialog pops up with the message
		  'An entry for host name "Yikes.london.sco.COM" already 
		  exists'.  Click on the OK button in the error dialog to 
		  return to the Modify Channel Table Entry dialog. 
		- Change "Yikes.london.sco.COM" to "modified.sco.com" in the 
		  "Host Name" text field.
		- Click on the OK button to exit the Modify dialog.
	- Back in the main screen, double click on the entry with hostname 
	  "spam.pdev.sco.com" under the Host column.
	- In the Modify Channel Table Entry dialog:
		- Click on the "Select..." button to the right of the
		  "Host Name" text field.
		- In the Select Host dialog:
			- Type the name "bean.pdev.sco.com" in the "Selection"
			  text field, and click on the OK button.
		- Back in the Modify dialog, click on the OK button to exit 
		  the Modify dialog.
	- In main screen, select menu option Entry->Exit.
	- In Save Changes dialog, click on Yes button to save changes and exit.
	
5. Move up/down entry (channel_gui_core_entry_move):
	- Select the entry with "foo.pdev.sco.com" under the "Host" column.
	- Select menu option Entry->Move Up.  The "foo.pdev.sco.com" entry
	  should now be the first entry in the list.  Click on the arrow up
	  button on the toolbar.  You should hear a beep.
	- Select the entry with "uwhelp.com" under the "Host" column.
	- Click on the arrow up button on the toolbar.
	- Select the entry with "yikes.newjersey.sco.com" under the "Host" 
	  column.
	- Select menu option Entry->Move Down.  Then click on the arrow down
	  button on the toolbar.  Click on the arrow down button on the toolbar
	  again.  "yikes.newjersey.sco.com" should now be the last entry in 
	  the list, and the list should have automatically scrolled down to
	  show the entry.
	- Click on the arrow down button on the toolbar.  You should hear a
	  beep.
	- In main screen, select menu option Entry->Exit.
	- In Save Changes dialog, click on Yes button to save changes and exit.

6. Save table file (channel_gui_core_entry_save):
	- Select the entry with "yikes.london.sco.com" under the "Host" column.
	- Select the Add button on the toolbar.
	- In Add Channel Table Entry dialog:
		- Type "newHost.sco.com" into the "Host Name" text field.
		- Type "mail sco.com" into the "Forwarding Host Name" text 
		  field.  Make sure that there is a space between the "mail" 
		  and "sco.com".
		- Click on the OK button.
		- Ensure an error dialog pops up with the message
		  'A host name may not contain a space'.  Click on the
		  OK button in the error dialog to return to the Add Channel
		  Table Entry dialog.  Focus should now be on the 
		  "Forwarding Host Name" text field.
		- Change the "mail sco.com" to "mail.sco.com" in the 
		  "Forwarding Host Name" text field.
		- Click on the OK button to exit the Add dialog.
	- Back in the main screen, select the entry with "spam.pdev.sco.com"
	  under the "Host" column.
	- Select the Modify button on the toolbar.
	- In the Modify Channel Table Entry dialog:
		- Change the name "spam.pdev.sco.com" to "modified.pdev.sco.com"
		  in the Name text field.
		- Click on the Cancel button.
	- In main screen, select menu option Entry->Save.
	- In main screen, select menu option Entry->Exit.
	
7. Exit channel table file -- do not save changes 
   (channel_gui_core_entry_exit_no_save):
	- Select the entry with "foo.pdev.sco.com" under the "Host" column.
	- Select menu option Entry->Add.
	- In Add Channel Table Entry dialog:
		- Type "newHost.sco.com" into the "Host Name" text field.
		- Type "mail.sco.com" into the "Forwarding Host Name" text 
		  field.
		- Click on the OK button to exit the Add dialog.
	- In main screen, select menu option Entry->Exit.
	- In Save Changes dialog, click on No button.

8. Exit channel table file, with cancel (channel_gui_core_entry_exit_cancel):
	- Select the entry with "yikes.london.sco.com" under the "Host" column.
	- Select menu option Entry->Modify.
	- In Modify Channel Table Entry dialog:
		- Change "yikes.london.sco.com" to "newHost.sco.com" in the 
		  "Host Name" text field.
		- Change "email.london.sco.com" to "mail.sco.com" in the 
		  "Forwarding Host Name" text field.
		- Click on the OK button to exit the Modify dialog.
	- In main screen, select menu option Entry->Exit.
	- In Save Changes dialog, click on Cancel button.
	- Select the entry with "uwhelp.com" under the "Host" column.
	- Select the Modify button on the toolbar.
	- In the Modify Channel Table Entry dialog:
		- Change "tehama.sco.com" to "mail2.sco.com" in the 
		  "Forwarding Host Name" text field.
		- Click on the OK button to exit the Modify dialog.
	- In main screen, select menu option Entry->Exit.
	- In Save Changes dialog, click on Yes button.

9. Create new, non-empty table file (channel_gui_core_file_doesnt_exist):
	- The application should appear, with an information dialog saying
	  "File does not exist".  Click on the OK button in this information
	  dialog.
	- Select menu option Entry->Add.
	- In Add Channel Table Entry dialog:
		- Type "newHost.sco.com" into the "Host Name" text field.
		- Type "mail.sco.com" into the "Forwarding Host Name" text 
		  field.
		- Click on the OK button to exit the Add dialog.
	- Back in the main screen, select menu option Entry->Exit.
	- In Save Changes dialog, click on Yes button to save changes and exit.

10. Open channel table file that doesn't exist, and exit 
    (channel_gui_core_file_doesnt_exist_exit):
	- The application should appear, with an information dialog saying
	  "File does not exist".  Click on the OK button in this information
	  dialog.
	- In main screen, select menu option Entry->Exit.

11. Open channel table file that doesn't exist, and save without modifications
    (channel_gui_core_file_doesnt_exist_empty):
	- The application should appear, with an information dialog saying
	  "File does not exist".  Click on the OK button in this information
	  dialog.
	- In main screen, select menu option Entry->Save.
	- Select menu option Entry->Exit.

12.  Test the Options menu (channel_gui_core_options):
	- Select the menu option Options->Point Help.  This should disable
	  point help.
	- Select the menu option Options->Toolbar.  The toolbar should
	  disappear.
	- Select the menu option Entry->Exit.  The application will close.
	- The test case will invoke the gui again.  Ensure that both the
	  point help and toolbar are disabled, and that the Options menu
	  reflects this.
	- Select the menu option Entry->Exit.

13.  Open channel table file where the filename specified is a directory
     (channel_gui_error_directory):
	- The application should come up but with an Error dialog.
	  Click on the OK button in the Error dialog.  Both the Error dialog
	  and the application should exit.

14.  Test that a system error in saving the channel table file is properly 
     caught and displayed in an error dialog (channel_gui_error_write):
	- Select menu option Entry->Delete.
	- Select menu option Entry->Exit.
	- In Save Changes dialog, click on Yes button to save changes and exit.
	- An error dialog should appear with the message "Unable to write 
	  channel table file <filename>".  Click on the OK button of this error 
	  dialog.
	- Select menu option Entry->Exit.
	- In Save Changes dialog, click on No button to exit.

15.  Test that a system error in creating the channel table database is
     properly caught and displayed in an error dialog 
     (channel_gui_error_database):
	- Select menu option Entry->Delete.
	- Select menu option Entry->Save.
	- An error dialog should appear with the message "Unable to create 
	  channel table database <filename>".  Click on the OK button of this 
	  error dialog.
	- Select menu option Entry->Exit.

16.  Test that a system error in loading (opening) the channel table file is
     properly caught and displayed in an error dialog 
     (channel_gui_error_load):
	- The application should come up but with an Error dialog with a
	  message saying the app was unable to load the file.
	- Click on the OK button in the Error dialog.  Both the Error dialog
	  and the application should exit.

The remaining test cases are fully automated and need no interaction:
17. Test usage of command line flags.
