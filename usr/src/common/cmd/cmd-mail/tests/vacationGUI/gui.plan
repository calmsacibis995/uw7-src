#===============================================================================
#
#	ident @(#) gui.plan 11.1 97/10/30 
#
#******************************************************************************
#
#	Copyright (C) 1993-1997 The Santa Cruz Operation, Inc.
#		All Rights Reserved.
#
#	The information in this file is provided for the exclusive use of
#	the licensees of The Santa Cruz Operation, Inc.  Such users have the
#	right to use, modify, and incorporate this code into other products
#	for purposes authorized by the license agreement provided they include
#	this notice and the associated copyright notice with any such product.
#	The information in this file is provided "AS IS" without warranty.
#
#******************************************************************************
#
# Modification History
#
# M000, 08-Apr-97, andrean
#	- Created.
#
#===============================================================================

			Vacation Client
		    Test Plan for GUI portions
		    --------------------------

This is the test plan for the vacation client-- a user admin GUI for
creating automatic replies when you're on vacation.  The goal of this 
test plan is to achieve 100% branch coverage of tcl source files for 
the vacation client.  Since a command line interface for the client 
does not exist, the gui can only be manually tested.  However, this 
test plan implements the idea of "semi-automation", meaning that scripts 
do the set up and comparison of files, but the GUI steps must still be 
executed manually according to a script.

Setup and Execution:

1) You may run this test plan as any real user on the system.  It assumes
   that both the HOME and LOGNAME env variables are set-- the vacation client
   creates files in $HOME.  It is also assumed that you will be testing this
   in an english locale.

2) The env variable TESTDIR may be set to the directory in which the test
   script "gui" will exist and be run, and where input and output files
   for "gui" will exist.  If TESTDIR is not set in your env, the script will
   by default set it to the current working directory.

3) Set env variable PROGDIR to the directory in which the "vacation"
   executable exists.  If PROGDIR is not set in your env, this script
   will by default set it to /etc/mail/admin.

   The "vacation" executable should be the instrumented version if you would
   like to determine code coverage:
         a) do a 'make vacationt' of the vacation src
         b) copy executable "vacationt" to $PROGDIR/vacation

4) Run the script "gui" to invoke the tests, and follow the plan below
   to execute the steps for each test case.  Test results will be sent 
   to stdout.  If a test case fails, a prompt will be displayed on stdout, 
   asking the tester if he/she wishes to re-execute this test-- this is in the 
   event that the tester believes that the failure may be due to incorrect
   execution of the test steps.

4) To obtain branch coverage results, execute the charm.plan test, as well
   as this one, before doing the following steps:
        a) Execution of the "gui" and "charm" scripts will have created many
           files of the form trace.* into $TESTDIR.
        b) Copy all *.tclt files from the source directory (generated by the 
	   make of vacationt) into the $TESTDIR directory.
        c) Execute the "do_merge" script, which will output coverage results
           to stdout, and also create files of the form *.tclt.a.  These
           *.tclt.a files are annotated versions of the source files--
           lines beginning with a ">_branch" in these files mark unexecuted
           branches.


The test cases, and step by step instructions, are as follows:

1. Test default tripnote and tripsubject text (vacation_gui_core_defaults):
	- Select the "On" radio button under "Set Vacation Notices".
	- Click on the OK button to exit.

2. Test $HOME/.alter_egos creation
	activation via $HOME/.maildelivery
	$HOME/tripnote creation
	$HOME/tripsubject creation
   (vacation_gui_core_on):

	- Select "On" under "Set Vacation Notices"
	- Press [Add...] under Other mail addresses box.
	- In the "Add Other Address" dialog:
		- Enter "foobar" and press <ENTER>.  Focus should now
		  be on the [OK] button.  Click on the [OK] button.
	- Verify address "foobar" appears selected in list box.
	- Press [Add...] under Other mail addresses box again.
	- In the "Add Other Address" dialog:
		- Enter text "foobar" and click on the [OK] button.
	- Verify there is only one "foobar" in the Other mail addresses box.
	- Press [Add...] under Other mail addresses box again.
		- Enter text "test er" (make sure there is a space after the
		  second "t") and click on the [OK] button.
		- Verify an error dialog appears with the message "An address
		  may not contain a space."  Click on the [OK] button to return
		  to the "Add Other Address" dialog.
		- Verify that upon return to the "Add Other Address" dialog,
		  focus in on the text field.  Replace text "test er" with
		  "tester" (remove the space).  Click on the [OK] button.
	- Press [Add...] under Other mail addresses box again.
	- In the "Add Other Address" dialog:
		- Enter text "spam".  Click on the [Cancel] button.
	- Verify the "Add Other Address" dialog closes, and "spam" does NOT 
	  appear in the Other mail addresses box.
	- Change the text in the Notification Subject box to read
	  "I'm on vacation!"
	- Change the text in the Notification Message box to read
	  "I'm on vacation from 4/21 through 4/28, but I'll read
	   your mail and respond as soon as I get back."
	  (Be sure to put a newline after "read".)
	- Press [OK] to exit the vacation manager.

3. Test de-activation via $HOME/.maildelivery
	triplog functionality
	default tripnote/tripsubject functionality
   (vacation_gui_core_off):

	- Verify that "On" is selected under "Set Vacation Notices".
	  Select "Off".
	- Select address "foobar" under the Other mail addresses box, and
	  then press [Remove].  Verify that "foobar" is removed from the box.
	- Press the [Default] button to the right of the Notification Subject
	  box.
	- Press [OK] button.
	- In the "Clear Notices?" dialog, press the [Cancel] button.
	- Press the [Default] button to the right of the Notification Message
	  box.
	- Press [OK] button.
	- In the "Clear Notices?" dialog, press the [Yes] button.

4. Test no answer to clear notices (vacation_gui_core_noclear):
	- Verify that "On" is selected under "Set Vacation Notices".
	  Select "Off".
	- Select address "foobar" under the Other mail addresses box, and
	  then press [Remove].  Verify that "foobar" is removed from the box.
	- Erase all text from the Notification Subject box.
	- Press [OK] button.
	- Verify an error dialog appears with the message 
		"You must enter a Notification Subject"
	  Press the [OK] button to close the error dialog.  Focus should now
	  be on the Notification Subject box.
	- Press the [Default] button to the right of the Notification Subject.
	- Erase all text from the Notification Message box.
	- Press [OK] button.
	- Verify an error dialog appears with the message 
		"You must enter a Notification Message"
	  Press the [OK] button to close the error dialog.  Focus should now be
	  on the Notification Message box.
	- Press the [Default] button to the right of the Notification Message
	  box.
	- Press [OK] button.
	- In the "Clear Notices?" dialog, press the [No] button.

5. Test cancel functionality (vacation_gui_core_cancel):
	- Verify that "On" is selected under "Set Vacation Notices".
	  Select "Off".
	- Select address "foobar" under the Other mail addresses box, and
	  then press [Remove].  Verify that "foobar" is removed from the box.
	- Press the [Clear] button to the right of the Notices sent list.
	- Press the [Default] button to the right of the Notification Subject
	  box.
	- Press the [Default] button to the right of the Notification Message
	  box.
	- Press [Cancel] button.

6. Test error when you attempt more than 1 invokation of vacation mgr
   (vacation_gui_error_lock):
	- The test case will invoke the vacation manager.  It will then
	  attempt to invoke the vacation manager again.  Verify that an
	  error dialog appears with the message 
		"Vacation preferences are already being edited."
	  Press the [OK] button in this error dialog, and verify that
	  it closes, and that a second vacation screen does not appear.
	- Press the [Clear] button to the right of the Notices sent list.
	- Press the [OK] button.

7. Test error in failure to remove triplog, invoked from the
   "Clear Notices?" dialog (vacation_gui_error_ask):
	- Verify that "On" is selected under "Set Vacation Notices".
	  Select "Off".
	- Press [OK] button.
	- In the "Clear Notices?" dialog, press the [Yes] button.
	- Verify an error dialog appears with the message
		"Can't remove file $HOME/triplog"
	  where $HOME is your home directory.  Press the [OK] button in this
	  error dialog.
	- Press the [OK] button.
	
8. Test error in failure to remove triplog, where the Clear button had been
   pressed (vacation_gui_error_triplog):
	- Verify that "On" is selected under "Set Vacation Notices".
	  Select "Off".
	- Press the [Clear] button to the right of the Notices sent list.
	- Press [OK] button.
	- Verify an error dialog appears with the message
		"Can't remove file $HOME/triplog"
	  where $HOME is your home directory.  Press the [OK] button in this
	  error dialog.

9. Test error in failure to write tripsubject (vacation_gui_error_tripsubject):
	- Change the text in the Notification Subject box to
		"I'm on vacation!"
	- Press [OK] button.
	- Verify an error dialog appears with the message
		Can't write file "$HOME/tripsubject"
	  where $HOME is your home directory.  Press the [OK] button in this
	  error dialog.
	- Press [Cancel] button.

10. Test error in failure to write tripnote (vacation_gui_error_tripnote):
	- Change the text in the Notification Message box to
		"I'm on vacation, so don't bother me!"
	- Press [OK] button.
	- Verify an error dialog appears with the message
		Can't write file "$HOME/tripnote"
	  where $HOME is your home directory.  Press the [OK] button in this
	  error dialog.
	- Press [Cancel] button.

11. Test error in failure to write .alter_egos (vacation_gui_error_alteregos):
	- Press [Add...] under Other mail addresses box.
	- In the "Add Other Address" dialog:
		- Enter "newAlterEgo".  Press the [OK] button.
	- Back in the main screen, press [OK] button.
	- Verify an error dialog appears with the message
		Can't write file "$HOME/.alter_egos"
	  where $HOME is your home directory.  Press the [OK] button in this
	  error dialog.
	- Press [Cancel] button.

12. Test error in failure to create empty triplog, when going from notices off
    to notices on, and triplog did not already exist 
    (vacation_gui_error_triplogon):
	- Select "On" under "Set Vacation Notices".
	- Press [OK] button.
	- Verify an error dialog appears with the message
		Can't write file "$HOME/triplog"
	  where $HOME is your home directory.  Press the [OK] button in this
	  error dialog.
	- Press [Cancel] button.

13. Test error in failure to append .maildelivery, when going from notices off
    to notices on (vacation_gui_error_deliveryon):
	- Select "On" under "Set Vacation Notices".
	- Press [OK] button.
	- Verify an error dialog appears with the message
		Can't write file "$HOME/.maildelivery"
	  where $HOME is your home directory.  Press the [OK] button in this
	  error dialog.
	- Press [Cancel] button.

14. Test error in failure to append .maildelivery, when going from notices off
    to notices on (vacation_gui_error_offread):
	- Select "Off" under "Set Vacation Notices".
	- Press [OK] button.
	- Verify an error dialog appears with the message
		Can't read file "$HOME/.maildelivery"
	  where $HOME is your home directory.  Press the [OK] button in this
	  error dialog.
	- Press [Cancel] button.

15. Test error in failure to append .maildelivery, when going from notices off
    to notices on (vacation_gui_error_offwrite):
	- Select "Off" under "Set Vacation Notices".
	- Press [OK] button.
	- Verify an error dialog appears with the message
		Can't write file "$HOME/.maildelivery"
	  where $HOME is your home directory.  Press the [OK] button in this
	  error dialog.
	- Press [Cancel] button.

16. Test error in failure to read in an existing tripsubject
    (vacation_gui_error_readsubject):
	- Verify an error dialog appears with the message
		Can't read file "$HOME/tripsubject"
	  where $HOME is your home directory.  Press the [OK] button in this
	  error dialog.

17. Test error in failure to read in an existing tripnote
    (vacation_gui_error_readmessage):
	- Verify an error dialog appears with the message
		Can't read file "$HOME/tripnote"
	  where $HOME is your home directory.  Press the [OK] button in this
	  error dialog.

The following test is fully automated, and requires no interaction:
18. Test command line arguments (vacation_gui_auto_cmdline)

