#ident	"@(#)ksh93:src/cmd/ksh93/Makefile	1.3.1.1"

include $(CMDRULES)

newline=;
CCFLAGS=-O $(CC.PIC)
COTEMP=\$$\$$
DEBUG=-UDEBUG
INSTALLROOT=../../..
KSHELL=-DKSHELL
LIBAST=${INSTALLROOT}/src/lib/libast/libast.a
LIBCMD=${INSTALLROOT}/src/lib/libcmd/libcmd.a
LIBODELTA=${INSTALLROOT}/src/lib/libodelta/libodelta.a
LIBVDELTA=${INSTALLROOT}/src/lib/libvdelta/libvdelta.a
LIBS=${LIBAST} ${LIBCMD} ${LIBODELTA} ${LIBVDELTA}
MTRACE=-UMTRACE
MULTIBYTE=-DMULTIBYTE
PACKAGE_ast=${INSTALLROOT}
PACKAGE_ast_INCLUDE=${PACKAGE_ast}/include
PACKAGE_ast_LIB=${PACKAGE_ast}/lib
SHELL=/bin/sh
SHOPT_SUID_EXEC=-DSHOPT_SUID_EXEC
SHOPT_SPAWN=-USHOPT_SPAWN
SHOPT_ESH=-DSHOPT_ESH
SHOPT_VSH=-DSHOPT_VSH
AR=ar
mam_libast=-last
mam_libcmd=-lcmd
mam_libdl=-ldl
mam_libdld=
mam_libintl=
mam_libi=
mam_libjobs=
mam_libm=-lm

all : ksh93 shcomp ksh.msg sh/suid_exec.c \
		${PACKAGE_ast_INCLUDE}/ast/error.h \
		${PACKAGE_ast_INCLUDE}/ast/sig.h \
		${PACKAGE_ast_INCLUDE}/ast/ls.h FEATURE/externs \
		${PACKAGE_ast_INCLUDE}/ast/ast.h libshell.a suid_exec

install : all ${INSTALLROOT}/bin ${INSTALLROOT}/bin/ksh \
		${INSTALLROOT}/man/man1 ${INSTALLROOT}/man/man1/sh.1 \
		${INSTALLROOT}/lib ${INSTALLROOT}/lib/libshell.a \
		${INSTALLROOT}/man/man3 ${INSTALLROOT}/man/man3/nval.3 \
		${INSTALLROOT}/include/ast \
		${INSTALLROOT}/include/ast/nval.h \
		${INSTALLROOT}/include/ast/shell.h \
		${INSTALLROOT}/bin/suid_exec ${INSTALLROOT}/bin/shcomp

clean :
	rm -f ./*\.o

clobber :	clean
	rm -f ./ksh93 ./shcomp ./suid_exec ./libshell.a

ksh93 : pmain.o libshell.a ${LIBS}
	${CC} ${CCFLAGS} \
	${LDFLAGS} -L. -L ${INSTALLROOT}/src/lib/libcmd \
	-L ${INSTALLROOT}/src/lib/libast -o ksh93 pmain.o main.o \
	libshell.a ${mam_libcmd} ${mam_libast} \
	${mam_libm} ${mam_libjobs} ${mam_libi} ${mam_libdl} ${mam_libdld} \
	${mam_libintl} ${mam_libast}

pmain.o : sh/pmain.c main.o
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${DEBUG}" \
	"${SHOPT_ESH}" "${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" "${KSHELL}" \
	"${MULTIBYTE}" -c sh/pmain.c

main.o : sh/main.c FEATURE/externs FEATURE/execargs FEATURE/pstat \
		FEATURE/time include/timeout.h include/history.h \
		include/shnodes.h include/jobs.h FEATURE/ttys \
		FEATURE/options include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h include/path.h \
		FEATURE/acct include/variables.h FEATURE/dynamic \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp \
		${PACKAGE_ast_INCLUDE}/ast/ls.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${DEBUG}" \
	"${SHOPT_ESH}" "${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" "${KSHELL}" \
	"${MULTIBYTE}" -c sh/main.c

FEATURE/externs : features/externs
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : run features/externs

FEATURE/execargs :
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : def execargs

FEATURE/pstat :
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : def pstat

FEATURE/time : features/time
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : run features/time

FEATURE/ttys : features/ttys
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : run features/ttys

FEATURE/options : features/options.sh
	sh ./iffe set cc ${CC} ${CCFLAGS}  "${MULTIBYTE}" ${LDFLAGS}  :   ref \
	${mam_cc_L+-L.} ${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} \
	${mam_libm} ${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} \
	${mam_libdl} ${mam_libdld} ${mam_cc_static} ${mam_libintl} \
	${mam_cc_dynamic} ${mam_libast} : run features/options.sh \
	OPTIONS

FEATURE/acct :
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : def acct

FEATURE/dynamic : features/dynamic
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : run features/dynamic

FEATURE/sigfeatures : features/sigfeatures
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : run features/sigfeatures

FEATURE/setjmp : features/setjmp
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : run features/setjmp

libshell.a : alarm.o cd_pwd.o cflow.o deparse.o getopts.o hist.o misc.o \
		print.o read.o sleep.o trap.o test.o typeset.o ulimit.o \
		umask.o whence.o arith.o args.o array.o completion.o \
		dlopen.o defs.o edit.o expand.o fault.o fcin.o history.o \
		init.o io.o jobs.o lex.o macro.o name.o parse.o path.o \
		string.o streval.o subshell.o tdump.o timers.o \
		trestore.o userinit.o waitevent.o xec.o limits.o msg.o \
		strdata.o testops.o keywords.o options.o signals.o \
		aliases.o builtins.o variables.o lexstates.o emacs.o \
		vi.o
	${AR} cr libshell.a alarm.o cd_pwd.o cflow.o deparse.o getopts.o \
	hist.o misc.o print.o read.o sleep.o trap.o test.o typeset.o \
	ulimit.o umask.o whence.o arith.o args.o array.o completion.o \
	dlopen.o defs.o edit.o expand.o fault.o fcin.o history.o \
	init.o io.o jobs.o lex.o$(newline) \
	${AR} cr libshell.a macro.o name.o parse.o path.o string.o \
	streval.o subshell.o tdump.o timers.o trestore.o userinit.o \
	waitevent.o \
	xec.o limits.o msg.o strdata.o testops.o keywords.o options.o \
	signals.o aliases.o builtins.o variables.o lexstates.o \
	emacs.o vi.o$(newline) \
	(ranlib libshell.a) >/dev/null 2>&1 || true

alarm.o : bltins/alarm.c FEATURE/time include/builtins.h \
		FEATURE/options ${PACKAGE_ast_INCLUDE}/ast/stak.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c bltins/alarm.c

cd_pwd.o : bltins/cd_pwd.c ${PACKAGE_ast_INCLUDE}/ast/ls.h \
		include/builtins.h FEATURE/dynamic FEATURE/options \
		include/name.h include/path.h FEATURE/acct \
		include/variables.h ${PACKAGE_ast_INCLUDE}/ast/error.h \
		${PACKAGE_ast_INCLUDE}/ast/stak.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" "${MULTIBYTE}" -c bltins/cd_pwd.c

cflow.o : bltins/cflow.c include/builtins.h FEATURE/dynamic \
		FEATURE/options include/shnodes.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c bltins/cflow.c

deparse.o : sh/deparse.c include/builtins.h FEATURE/dynamic \
		FEATURE/options include/shnodes.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c sh/deparse.c

getopts.o : bltins/getopts.c include/builtins.h FEATURE/dynamic \
		FEATURE/options include/nval.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h include/variables.h \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp \
		include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" "${MULTIBYTE}" -c bltins/getopts.c

hist.o : bltins/hist.c include/builtins.h FEATURE/dynamic \
		FEATURE/options include/history.h include/name.h \
		include/io.h ${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/variables.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h \
		${PACKAGE_ast_INCLUDE}/ast/ls.h \
		${PACKAGE_ast_INCLUDE}/ast/stak.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" "${KSHELL}" "${MULTIBYTE}" \
	-c bltins/hist.c

misc.o : bltins/misc.c include/jobs.h FEATURE/ttys FEATURE/options \
		include/builtins.h FEATURE/dynamic include/history.h \
		include/name.h include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/path.h \
		FEATURE/acct include/shnodes.h include/variables.h \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" "${KSHELL}" "${MULTIBYTE}" \
	-c bltins/misc.c

print.o : bltins/print.c include/builtins.h FEATURE/dynamic \
		FEATURE/options include/history.h include/name.h \
		include/io.h ${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h \
		${PACKAGE_ast_INCLUDE}/ast/stak.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" "${KSHELL}" -c bltins/print.c

read.o : bltins/read.c include/terminal.h include/history.h \
		include/builtins.h FEATURE/dynamic FEATURE/options \
		include/name.h include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/lexstates.h \
		include/variables.h include/defs.h include/shell.h \
		include/argnod.h include/fault.h FEATURE/sigfeatures \
		FEATURE/setjmp ${PACKAGE_ast_INCLUDE}/ast/error.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_ESH}" \
	"${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" "${KSHELL}" "${MULTIBYTE}" \
	-c bltins/read.c

sleep.o : bltins/sleep.c FEATURE/poll FEATURE/time include/builtins.h \
		FEATURE/dynamic FEATURE/options \
		${PACKAGE_ast_INCLUDE}/ast/error.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c bltins/sleep.c

FEATURE/poll : features/poll
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : run features/poll

trap.o : bltins/trap.c include/builtins.h FEATURE/dynamic \
		FEATURE/options include/jobs.h FEATURE/ttys \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp \
		include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c bltins/trap.c

test.o : bltins/test.c FEATURE/externs include/builtins.h \
		FEATURE/dynamic FEATURE/options include/test.h \
		include/terminal.h include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h \
		${PACKAGE_ast_INCLUDE}/ast/ls.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" "${KSHELL}" -c bltins/test.c

typeset.o : bltins/typeset.c include/builtins.h FEATURE/dynamic \
		FEATURE/options include/history.h include/name.h \
		include/path.h FEATURE/acct \
		${PACKAGE_ast_INCLUDE}/ast/error.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c bltins/typeset.c

ulimit.o : bltins/ulimit.c include/ulimit.h FEATURE/rlimits \
		include/builtins.h FEATURE/dynamic FEATURE/options \
		include/shell.h ${PACKAGE_ast_INCLUDE}/ast/error.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c bltins/ulimit.c

FEATURE/rlimits : features/rlimits
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : run features/rlimits

umask.o : bltins/umask.c include/builtins.h FEATURE/dynamic \
		FEATURE/options include/shell.h \
		${PACKAGE_ast_INCLUDE}/ast/ls.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c bltins/umask.c

whence.o : bltins/whence.c include/builtins.h FEATURE/dynamic \
		FEATURE/options include/shlex.h include/path.h \
		FEATURE/acct include/name.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c bltins/whence.c

arith.o : sh/arith.c FEATURE/locale include/streval.h include/name.h \
		include/lexstates.h include/defs.h include/shell.h \
		include/argnod.h include/fault.h FEATURE/sigfeatures \
		FEATURE/setjmp include/history.h FEATURE/options
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${MULTIBYTE}" \
	"${SHOPT_ESH}" "${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" -c sh/arith.c

FEATURE/locale : features/locale
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : run features/locale

args.o : sh/args.c include/terminal.h include/builtins.h \
		FEATURE/dynamic FEATURE/options include/path.h \
		FEATURE/acct include/defs.h include/shell.h \
		include/argnod.h include/fault.h FEATURE/sigfeatures \
		FEATURE/setjmp include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${KSHELL}" "${SHOPT_ESH}" -c sh/args.c



array.o : sh/array.c include/name.h ${PACKAGE_ast_INCLUDE}/ast/stak.h \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp \
		include/history.h FEATURE/options
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_ESH}" \
	"${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" -c sh/array.c

completion.o : edit/completion.c include/history.h include/edit.h \
		FEATURE/setjmp FEATURE/options include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/path.h \
		FEATURE/acct include/lexstates.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${MULTIBYTE}" \
	"${SHOPT_ESH}" "${KSHELL}" "${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" \
	-c edit/completion.c

dlopen.o : sh/dlopen.c FEATURE/dynamic include/nval.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast  -c \
	sh/dlopen.c

defs.o : sh/defs.c include/timeout.h include/edit.h FEATURE/setjmp \
		FEATURE/options include/shlex.h include/jobs.h \
		FEATURE/ttys include/defs.h include/shell.h \
		include/argnod.h include/fault.h FEATURE/sigfeatures \
		include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${MULTIBYTE}" \
	"${SHOPT_ESH}" "${SHOPT_VSH}" "${KSHELL}" "${SHOPT_SUID_EXEC}" \
	-c sh/defs.c

edit.o : edit/edit.c include/edit.h FEATURE/setjmp FEATURE/options \
		include/history.h include/terminal.h include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h FEATURE/time \
		include/path.h FEATURE/acct
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${MULTIBYTE}" \
	"${SHOPT_ESH}" "${SHOPT_VSH}" "${KSHELL}" "${SHOPT_SUID_EXEC}" \
	-c edit/edit.c

expand.o : sh/expand.c include/path.h FEATURE/acct FEATURE/options \
		include/io.h ${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h \
		${PACKAGE_ast_INCLUDE}/ast/ast_dir.h \
		${PACKAGE_ast_INCLUDE}/ast/stak.h \
		${PACKAGE_ast_INCLUDE}/ast/ls.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_SUID_EXEC}" \
	"${SHOPT_VSH}" "${SHOPT_ESH}" "${KSHELL}" "${MULTIBYTE}" \
	-c sh/expand.c

fault.o : sh/fault.c include/path.h FEATURE/acct FEATURE/options \
		include/jobs.h FEATURE/ttys include/shnodes.h \
		include/history.h include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/fcin.h \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_ESH}" \
	"${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" "${KSHELL}" -c sh/fault.c

fcin.o : sh/fcin.c include/fcin.h ${PACKAGE_ast_INCLUDE}/ast/error.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast  -c \
	sh/fcin.c

history.o : edit/history.c include/history.h \
		${PACKAGE_ast_INCLUDE}/ast/ls.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h FEATURE/time \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_ESH}" "${DEBUG}" "${MULTIBYTE}" "${KSHELL}" "${SHOPT_SUID_EXEC}" \
	-c edit/history.c

init.o : sh/init.c FEATURE/locale include/lexstates.h FEATURE/dynamic \
		FEATURE/time include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/jobs.h \
		FEATURE/ttys FEATURE/options include/name.h include/edit.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp \
		include/path.h FEATURE/acct include/variables.h \
		${PACKAGE_ast_INCLUDE}/ast/stak.h include/defs.h \
		include/shell.h include/argnod.h include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${MULTIBYTE}" \
	"${KSHELL}" "${SHOPT_ESH}" "${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" \
	"${MTRACE}" -c sh/init.c

io.o : sh/io.c FEATURE/poll FEATURE/dynamic FEATURE/externs \
		include/timeout.h include/edit.h FEATURE/setjmp \
		FEATURE/options include/history.h include/shnodes.h \
		include/jobs.h FEATURE/ttys include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/variables.h \
		${PACKAGE_ast_INCLUDE}/ast/ls.h include/fcin.h \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${DEBUG}" \
	"${SHOPT_VSH}" "${SHOPT_ESH}" "${MULTIBYTE}" "${KSHELL}" \
	"${SHOPT_SUID_EXEC}" -c sh/io.c

jobs.o : sh/jobs.c include/history.h include/jobs.h FEATURE/ttys \
		FEATURE/options include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h \
		${PACKAGE_ast_INCLUDE}/ast/wait.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${DEBUG}" "${SHOPT_ESH}" "${SHOPT_SUID_EXEC}" "${KSHELL}" \
	-c sh/jobs.c

lex.o : sh/lex.c include/lexstates.h include/test.h include/shlex.h \
		FEATURE/options include/argnod.h include/nval.h \
		include/fcin.h ${PACKAGE_ast_INCLUDE}/ast/stak.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_ESH}" \
	"${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" "${KSHELL}" -c sh/lex.c

macro.o : sh/macro.c include/path.h FEATURE/acct FEATURE/options \
		include/shnodes.h include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/shlex.h \
		include/variables.h FEATURE/dynamic include/name.h \
		include/fcin.h include/defs.h include/shell.h \
		include/argnod.h include/fault.h FEATURE/sigfeatures \
		FEATURE/setjmp include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${KSHELL}" \
	"${MULTIBYTE}" "${SHOPT_SUID_EXEC}" "${SHOPT_VSH}" "${SHOPT_ESH}" \
	-c sh/macro.c

name.o : sh/name.c FEATURE/locale include/timeout.h include/lexstates.h \
		include/path.h FEATURE/acct FEATURE/options \
		include/variables.h FEATURE/dynamic include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" "${MULTIBYTE}" -c sh/name.c

parse.o : sh/parse.c include/test.h include/builtins.h FEATURE/dynamic \
		FEATURE/options include/history.h include/shlex.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h include/fcin.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" "${KSHELL}" -c sh/parse.c

path.o : sh/path.c FEATURE/time FEATURE/externs include/test.h \
		include/history.h include/jobs.h FEATURE/ttys \
		FEATURE/options include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/path.h \
		FEATURE/acct include/variables.h FEATURE/dynamic \
		${PACKAGE_ast_INCLUDE}/ast/ls.h include/fcin.h \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_SUID_EXEC}" \
	"${SHOPT_ESH}" "${SHOPT_VSH}" "${KSHELL}" "${MULTIBYTE}" \
	-c sh/path.c

string.o : sh/string.c include/lexstates.h include/shtable.h \
		${PACKAGE_ast_INCLUDE}/ast/stak.h include/defs.h \
		include/shell.h include/argnod.h include/fault.h \
		FEATURE/sigfeatures FEATURE/setjmp include/history.h \
		FEATURE/options ${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${MULTIBYTE}" \
	"${SHOPT_ESH}" "${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" -c sh/string.c

streval.o : sh/streval.c FEATURE/externs \
		${PACKAGE_ast_INCLUDE}/ast/error.h include/streval.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast  -c \
	sh/streval.c

subshell.o : sh/subshell.c include/path.h FEATURE/acct FEATURE/options \
		include/variables.h FEATURE/dynamic include/jobs.h \
		FEATURE/ttys include/shlex.h include/shnodes.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp \
		include/io.h ${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h \
		${PACKAGE_ast_INCLUDE}/ast/ls.h include/defs.h \
		include/shell.h include/argnod.h include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_SUID_EXEC}" \
	"${SHOPT_VSH}" "${SHOPT_ESH}" "${MULTIBYTE}" "${KSHELL}" \
	-c sh/subshell.c

tdump.o : sh/tdump.c include/io.h ${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/path.h \
		FEATURE/acct FEATURE/options include/shnodes.h \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp \
		include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${KSHELL}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_VSH}" "${SHOPT_ESH}" -c sh/tdump.c

timers.o : sh/timers.c FEATURE/time FEATURE/sigfeatures include/fault.h \
		FEATURE/setjmp ${PACKAGE_ast_INCLUDE}/ast/error.h \
		${PACKAGE_ast_INCLUDE}/ast/sig.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast  -c \
	sh/timers.c

trestore.o : sh/trestore.c include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/path.h \
		FEATURE/acct FEATURE/options include/shnodes.h \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp \
		include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${KSHELL}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_VSH}" "${SHOPT_ESH}" -c sh/trestore.c

userinit.o : sh/userinit.c include/defs.h include/shell.h \
		include/argnod.h include/fault.h FEATURE/sigfeatures \
		FEATURE/setjmp include/history.h FEATURE/options
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_ESH}" \
	"${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" -c sh/userinit.c

waitevent.o : sh/waitevent.c include/defs.h 
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_ESH}" \
	"${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" -c sh/waitevent.c

xec.o : sh/xec.c FEATURE/locale FEATURE/externs FEATURE/time \
		include/builtins.h FEATURE/dynamic FEATURE/options \
		include/test.h include/jobs.h FEATURE/ttys \
		include/shnodes.h include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/path.h \
		FEATURE/acct include/variables.h include/fcin.h \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp \
		include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_SPAWN}" \
	"${MULTIBYTE}" "${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" \
	"${KSHELL}" -c sh/xec.c

limits.o : data/limits.c include/ulimit.h FEATURE/time FEATURE/rlimits \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast  -c \
	data/limits.c

msg.o : data/msg.c include/edit.h FEATURE/setjmp FEATURE/options \
		include/jobs.h FEATURE/ttys include/builtins.h \
		FEATURE/dynamic include/history.h include/timeout.h \
		include/shlex.h include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/path.h \
		FEATURE/acct include/defs.h include/shell.h \
		include/argnod.h include/fault.h FEATURE/sigfeatures
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_SUID_EXEC}" \
	"${MULTIBYTE}" "${KSHELL}" "${SHOPT_ESH}" "${SHOPT_VSH}" \
	-c data/msg.c

strdata.o : data/strdata.c include/streval.h FEATURE/options
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c data/strdata.c

testops.o : data/testops.c include/test.h include/shtable.h
	${CC} ${CCFLAGS} -Iinclude  -c data/testops.c

keywords.o : data/keywords.c FEATURE/options include/shlex.h \
		include/shtable.h ${PACKAGE_ast_INCLUDE}/ast/hash.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c data/keywords.c

options.o : data/options.c include/shtable.h include/name.h \
		FEATURE/options include/shell.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c data/options.c

signals.o : data/signals.c include/fault.h FEATURE/sigfeatures \
		FEATURE/setjmp include/shtable.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast  -c \
	data/signals.c

aliases.o : data/aliases.c include/name.h include/shtable.h \
		FEATURE/dynamic FEATURE/options \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c data/aliases.c

builtins.o : data/builtins.c FEATURE/cmds include/name.h \
		include/shtable.h include/shell.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${SHOPT_VSH}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" "${KSHELL}" -c data/builtins.c

FEATURE/cmds : features/cmds
	sh ./iffe set cc ${CC} ${CCFLAGS}   ${LDFLAGS}  :   ref ${mam_cc_L+-L.} \
	${mam_cc_L+-L${PACKAGE_ast_LIB}} ${mam_cc_static} ${mam_libm} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} ${mam_libdl} \
	${mam_libdld} ${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} \
	${mam_libast} : run features/cmds

variables.o : data/variables.c include/name.h include/shtable.h \
		include/shell.h FEATURE/dynamic FEATURE/options \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${MULTIBYTE}" \
	"${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" "${SHOPT_ESH}" -c data/variables.c

lexstates.o : data/lexstates.c include/lexstates.h FEATURE/options
	${CC} ${CCFLAGS} -I. -Iinclude "${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" \
	"${SHOPT_ESH}" -c data/lexstates.c

emacs.o : edit/emacs.c include/terminal.h include/edit.h FEATURE/setjmp \
		FEATURE/options include/history.h include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${MULTIBYTE}" \
	"${KSHELL}" "${SHOPT_ESH}" "${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" \
	-c edit/emacs.c

vi.o : edit/vi.c FEATURE/time include/terminal.h include/edit.h \
		FEATURE/setjmp FEATURE/options include/history.h \
		include/io.h ${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h \
		${PACKAGE_ast_INCLUDE}/ast/error.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${MULTIBYTE}" \
	"${KSHELL}" "${SHOPT_ESH}" "${SHOPT_VSH}" "${SHOPT_SUID_EXEC}" \
	-c edit/vi.c

shcomp : shcomp.o libshell.a
	${CC} ${CCFLAGS} "${KSHELL}" "${SHOPT_SUID_EXEC}" "${SHOPT_VSH}" \
	"${SHOPT_ESH}" "${MULTIBYTE}" "${DEBUG}" "${MTRACE}" "${SHOPT_SPAWN}" \
	${LDFLAGS} -L ${INSTALLROOT}/src/lib/libcmd \
	-L ${INSTALLROOT}/src/lib/libast \
	"${KSHELL}" "${SHOPT_SUID_EXEC}" "${SHOPT_VSH}" "${SHOPT_ESH}" \
	"${MULTIBYTE}" "${DEBUG}" "${MTRACE}" "${SHOPT_SPAWN}" -o \
	shcomp shcomp.o libshell.a ${mam_libcmd} ${mam_libast} ${mam_cc_static} \
	${mam_libm} ${mam_cc_dynamic} ${mam_cc_static} ${mam_libjobs} \
	${mam_cc_dynamic} ${mam_cc_static} ${mam_libi} ${mam_cc_dynamic} \
	${mam_libdl} ${mam_libdld} ${mam_cc_static} ${mam_libintl} \
	${mam_cc_dynamic} ${mam_libast}

shcomp.o : sh/shcomp.c include/io.h ${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/path.h \
		FEATURE/acct FEATURE/options include/shnodes.h \
		include/defs.h include/shell.h include/argnod.h \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp \
		include/history.h
	${CC} ${CCFLAGS} -I. -Iinclude -I${PACKAGE_ast_INCLUDE}/ast "${KSHELL}" \
	"${SHOPT_SUID_EXEC}" "${SHOPT_VSH}" "${SHOPT_ESH}" -c sh/shcomp.c

ksh.msg : data/limits.c include/ulimit.h FEATURE/time FEATURE/rlimits \
		${PACKAGE_ast_INCLUDE}/ast/ast.h data/msg.c \
		include/edit.h FEATURE/setjmp FEATURE/options \
		include/jobs.h FEATURE/ttys include/builtins.h \
		FEATURE/dynamic include/history.h include/timeout.h \
		include/shlex.h include/io.h \
		${PACKAGE_ast_INCLUDE}/ast/sfio.h \
		${PACKAGE_ast_INCLUDE}/ast/ast.h include/path.h \
		FEATURE/acct include/defs.h include/shell.h \
		include/argnod.h include/fault.h FEATURE/sigfeatures \
		data/strdata.c include/streval.h FEATURE/options \
		data/testops.c include/test.h include/shtable.h \
		data/keywords.c FEATURE/options include/shlex.h \
		include/shtable.h ${PACKAGE_ast_INCLUDE}/ast/hash.h \
		data/options.c include/shtable.h include/name.h \
		FEATURE/options include/shell.h \
		include/shtable.h FEATURE/options \
		${PACKAGE_ast_INCLUDE}/ast/ast.h data/signals.c \
		include/fault.h FEATURE/sigfeatures FEATURE/setjmp \
		include/shtable.h ${PACKAGE_ast_INCLUDE}/ast/ast.h \
		data/aliases.c include/name.h include/shtable.h \
		FEATURE/dynamic FEATURE/options \
		${PACKAGE_ast_INCLUDE}/ast/ast.h data/builtins.c \
		FEATURE/cmds include/name.h include/shtable.h \
		include/shell.h data/variables.c include/name.h \
		include/shtable.h include/shell.h FEATURE/dynamic \
		FEATURE/options ${PACKAGE_ast_INCLUDE}/ast/ast.h \
		data/lexstates.c include/lexstates.h FEATURE/options
	grep '[ 	]e_[a-z].*".*[^\][a-z].*"' data/limits.c data/msg.c data/strdata.c \
	data/testops.c data/keywords.c data/options.c \
	data/signals.c data/aliases.c data/builtins.c data/variables.c \
	data/lexstates.c |  grep -v /bin/ |  grep -v /usr/ | grep \
	-v /dev/ |  grep -v /etc/ | grep -v A__z | sed 's/.*=[ 	]*\(".*"\);.*/\1/' \
	| sort | uniq > ksh.msg$(newline) \
	grep '[ 	]sh_opt.*".*[^\][a-z].*"' data/limits.c data/msg.c data/strdata.c \
	data/testops.c data/keywords.c data/options.c \
	data/signals.c data/aliases.c data/builtins.c data/variables.c \
	data/lexstates.c |  sed 's/.*=[ 	]*\(".*"\);.*/\1/'  >> ksh.msg$(newline) \
	grep '[ 	]is_[a-z].*".*[^\][a-z].*"' data/limits.c data/msg.c data/strdata.c \
	data/testops.c data/keywords.c data/options.c \
	data/signals.c data/aliases.c data/builtins.c data/variables.c \
	data/lexstates.c |  sed 's/.*=[ 	]*\(".*"\);.*/\1/'  >> ksh.msg$(newline) \
	grep '[         ]e_notset' data/limits.c data/msg.c data/strdata.c \
	data/testops.c data/keywords.c data/options.c \
	data/signals.c data/aliases.c data/builtins.c data/variables.c \
	data/lexstates.c | sed 's/.*"....\(.*"\).*/"\1/' >> ksh.msg$(newline) \
	grep '[         ]e_subst' data/limits.c data/msg.c data/strdata.c \
	data/testops.c data/keywords.c data/options.c \
	data/signals.c data/aliases.c data/builtins.c data/variables.c \
	data/lexstates.c | sed 's/.*"....\(.*"\).*/"\1/' >> ksh.msg$(newline) \
	grep '[         ]e_file' data/limits.c data/msg.c data/strdata.c \
	data/testops.c data/keywords.c data/options.c \
	data/signals.c data/aliases.c data/builtins.c data/variables.c \
	data/lexstates.c | sed 's/.*"....\(.*"\).*/"\1/' >> ksh.msg$(newline) \
	grep ',\$$' data/signals.c  | sed 's/.*\(".*"\),/\1/' | sort | uniq \
	>> ksh.msg

suid_exec : suid_exec.o
	${CC} ${CCFLAGS} ${LDFLAGS} -L ${INSTALLROOT}/src/lib/libcmd \
	-L ${INSTALLROOT}/src/lib/libast \
	-o suid_exec suid_exec.o ${mam_cc_static} ${mam_libm} ${mam_cc_dynamic} \
	${mam_cc_static} ${mam_libjobs} ${mam_cc_dynamic} ${mam_cc_static} \
	${mam_libi} ${mam_cc_dynamic} ${mam_libdl} ${mam_libdld} \
	${mam_cc_static} ${mam_libintl} ${mam_cc_dynamic} ${mam_libast}

suid_exec.o : sh/suid_exec.c ${PACKAGE_ast_INCLUDE}/ast/error.h \
		${PACKAGE_ast_INCLUDE}/ast/sig.h \
		${PACKAGE_ast_INCLUDE}/ast/ls.h FEATURE/externs \
		${PACKAGE_ast_INCLUDE}/ast/ast.h
	${CC} ${CCFLAGS} -I. -I${PACKAGE_ast_INCLUDE}/ast  -c sh/suid_exec.c

${INSTALLROOT}/bin :
	set -$(newline) \
	if	test ! -d ${INSTALLROOT}/bin$(newline) \
	then	set -x && mkdir -p ${INSTALLROOT}/bin 2>/dev/null && set - \
	||$(newline) \
	{$(newline) \
	p=$(newline) \
	for d in `echo ${INSTALLROOT}/bin | sed -e 's%\\(.\\)/%\\1 %g'`$(newline) \
	do	case $$p in$(newline) \
	"")	p=$$d ;;$(newline) \
	*)	p=$$p/$$d ;;$(newline) \
	esac$(newline) \
	case $$d in$(newline) \
	.|..)	;;$(newline) \
	*)	if	test ! -d $$p$(newline) \
	then	rm -f $$p$(newline) \
	set -x && mkdir $$p && set -$(newline) \
	fi$(newline) \
	;;$(newline) \
	esac$(newline) \
	done$(newline) \
	} && set -x 		    		   $(newline) \
	fi

${INSTALLROOT}/bin/ksh : ksh
	{ mv ${INSTALLROOT}/bin/ksh ${INSTALLROOT}/bin/ksh.old 2>/dev/null; \
	cp ksh ${INSTALLROOT}/bin/ksh 2>/dev/null  		    		    ;} \
	|| true

${INSTALLROOT}/man/man1 :
	set -$(newline) \
	if	test ! -d ${INSTALLROOT}/man/man1$(newline) \
	then	set -x && mkdir -p ${INSTALLROOT}/man/man1 2>/dev/null && set \
	- ||$(newline) \
	{$(newline) \
	p=$(newline) \
	for d in `echo ${INSTALLROOT}/man/man1 | sed -e 's%\\(.\\)/%\\1 \
	%g'`$(newline) \
	do	case $$p in$(newline) \
	"")	p=$$d ;;$(newline) \
	*)	p=$$p/$$d ;;$(newline) \
	esac$(newline) \
	case $$d in$(newline) \
	.|..)	;;$(newline) \
	*)	if	test ! -d $$p$(newline) \
	then	rm -f $$p$(newline) \
	set -x && mkdir $$p && set -$(newline) \
	fi$(newline) \
	;;$(newline) \
	esac$(newline) \
	done$(newline) \
	} && set -x 		    		   $(newline) \
	fi

${INSTALLROOT}/man/man1/sh.1 : sh.1
	{ mv ${INSTALLROOT}/man/man1/sh.1 ${INSTALLROOT}/man/man1/sh.1.old \
	2>/dev/null; cp sh.1 ${INSTALLROOT}/man/man1/sh.1 2>/dev/null \
	;} || true

${INSTALLROOT}/lib :
	set -$(newline) \
	if	test ! -d ${INSTALLROOT}/lib$(newline) \
	then	set -x && mkdir -p ${INSTALLROOT}/lib 2>/dev/null && set - \
	||$(newline) \
	{$(newline) \
	p=$(newline) \
	for d in `echo ${INSTALLROOT}/lib | sed -e 's%\\(.\\)/%\\1 %g'`$(newline) \
	do	case $$p in$(newline) \
	"")	p=$$d ;;$(newline) \
	*)	p=$$p/$$d ;;$(newline) \
	esac$(newline) \
	case $$d in$(newline) \
	.|..)	;;$(newline) \
	*)	if	test ! -d $$p$(newline) \
	then	rm -f $$p$(newline) \
	set -x && mkdir $$p && set -$(newline) \
	fi$(newline) \
	;;$(newline) \
	esac$(newline) \
	done$(newline) \
	} && set -x 		    		   $(newline) \
	fi

${INSTALLROOT}/lib/libshell.a : libshell.a
	{ mv ${INSTALLROOT}/lib/libshell.a ${INSTALLROOT}/lib/libshell.a.old \
	2>/dev/null; cp libshell.a ${INSTALLROOT}/lib/libshell.a \
	2>/dev/null  		    		    ;} || true$(newline) \
	(ranlib ${INSTALLROOT}/lib/libshell.a) >/dev/null 2>&1 || true

${INSTALLROOT}/man/man3 :
	set -$(newline) \
	if	test ! -d ${INSTALLROOT}/man/man3$(newline) \
	then	set -x && mkdir -p ${INSTALLROOT}/man/man3 2>/dev/null && set \
	- ||$(newline) \
	{$(newline) \
	p=$(newline) \
	for d in `echo ${INSTALLROOT}/man/man3 | sed -e 's%\\(.\\)/%\\1 \
	%g'`$(newline) \
	do	case $$p in$(newline) \
	"")	p=$$d ;;$(newline) \
	*)	p=$$p/$$d ;;$(newline) \
	esac$(newline) \
	case $$d in$(newline) \
	.|..)	;;$(newline) \
	*)	if	test ! -d $$p$(newline) \
	then	rm -f $$p$(newline) \
	set -x && mkdir $$p && set -$(newline) \
	fi$(newline) \
	;;$(newline) \
	esac$(newline) \
	done$(newline) \
	} && set -x 		    		   $(newline) \
	fi

${INSTALLROOT}/man/man3/nval.3 : nval.3
	{ mv ${INSTALLROOT}/man/man3/nval.3 ${INSTALLROOT}/man/man3/nval.3.old \
	2>/dev/null; cp nval.3 ${INSTALLROOT}/man/man3/nval.3 2>/dev/null \
	;} || true

${INSTALLROOT}/include/ast :
	set -$(newline) \
	if	test ! -d ${INSTALLROOT}/include/ast$(newline) \
	then	set -x && mkdir -p ${INSTALLROOT}/include/ast 2>/dev/null && \
	set - ||$(newline) \
	{$(newline) \
	p=$(newline) \
	for d in `echo ${INSTALLROOT}/include/ast | sed -e 's%\\(.\\)/%\\1 \
	%g'`$(newline) \
	do	case $$p in$(newline) \
	"")	p=$$d ;;$(newline) \
	*)	p=$$p/$$d ;;$(newline) \
	esac$(newline) \
	case $$d in$(newline) \
	.|..)	;;$(newline) \
	*)	if	test ! -d $$p$(newline) \
	then	rm -f $$p$(newline) \
	set -x && mkdir $$p && set -$(newline) \
	fi$(newline) \
	;;$(newline) \
	esac$(newline) \
	done$(newline) \
	} && set -x 		    		   $(newline) \
	fi

${INSTALLROOT}/include/ast/nval.h : include/nval.h
	proto -p -s -c'AT&T Bell Laboratories' include/nval.h > 1.${COTEMP}.x$(newline) \
	if	cmp -s ${INSTALLROOT}/include/ast/nval.h 1.${COTEMP}.x$(newline) \
	then	rm -f 1.${COTEMP}.x$(newline) \
	else	mv 1.${COTEMP}.x ${INSTALLROOT}/include/ast/nval.h$(newline) \
	fi

${INSTALLROOT}/include/ast/shell.h : include/shell.h
	proto -p -s -c'AT&T Bell Laboratories' include/shell.h > 1.${COTEMP}.x$(newline) \
	if	cmp -s ${INSTALLROOT}/include/ast/shell.h 1.${COTEMP}.x$(newline) \
	then	rm -f 1.${COTEMP}.x$(newline) \
	else	mv 1.${COTEMP}.x ${INSTALLROOT}/include/ast/shell.h$(newline) \
	fi

${INSTALLROOT}/bin/suid_exec : suid_exec
	{ mv ${INSTALLROOT}/bin/suid_exec ${INSTALLROOT}/bin/suid_exec.old \
	2>/dev/null; cp suid_exec ${INSTALLROOT}/bin/suid_exec 2>/dev/null \
	;} || true

${INSTALLROOT}/bin/shcomp : shcomp
	{ mv ${INSTALLROOT}/bin/shcomp ${INSTALLROOT}/bin/shcomp.old 2>/dev/null; \
	cp shcomp ${INSTALLROOT}/bin/shcomp 2>/dev/null  		    	 \
	;} || true

${LIBS}	:
	cd ${INSTALLROOT}/src/lib; make all
